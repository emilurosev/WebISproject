<!-- <div class="container">
  
  

  <h3 style="text-align: center; margin-top: 50px; margin-bottom: 30px">Hello {{username}}!</h3>
  <div style="text-align: center; margin: auto; width: 30%; margin-bottom: 30px; margin-top: 50px" >
    <p *ngIf="invalidUsername" style="color:red">Invalid username!</p>
    <button class="close" aria-label="Close" *ngIf="searchAcitve" (click)="back()"><span aria-hidden="true">&times;</span></button>
    <div class="form-group">
      <input size="14" class="form-control" type="text" [(ngModel)]="recieversName" placeholder="Search username">
    </div>
    <button class="btn btn-outline-primary" (click)='setReciever(recieversName)'>Search</button>

  </div>

  <div style="text-align: center; margin-bottom: 100px">

    <div style="overflow-y:scroll; overflow-x:hidden; height:400px; width: 16%" class="parts">
      <div *ngFor='let username of usernames | orderBy: "displayUnread(i)"; let i=index'>
        <button class="btn btn-outline-success" style="width: 147px;" (click)='setReciever(username);'>
          {{username}}<i *ngIf="!displayUnread(i)>0" class="fa fa-circle" aria-hidden="true" style="font-size: 5px; float: right; margin-top: 11px"></i><span style="color: blue;float: right" *ngIf="displayUnread(i)>0">{{displayUnread(i)}}</span>
        </button>
      </div>
    </div>

    <div style="width: 50%" class="parts">
      
      <div style="overflow-y:scroll; overflow-x:hidden; height:218px">
        <div *ngFor="let el of lista">
          <p *ngIf="el.receiver == 'everyone'">{{el.sender}}: {{el.body}}</p>
        </div> 
      </div>
    
      <div >
        <div class="form-group">
          <textarea placeholder="Enter a message" [(ngModel)]="msg" class="form-control" rows="5" ></textarea>
        </div>  
        <button class="btn btn-outline-primary" type="button" (click)="sendToEveryone()">Send to Everyone</button>
      </div>
  
    </div>

    <div *ngIf="openPrivate" style="width: 34%" class="parts">
    
      <div style="overflow-y:scroll; overflow-x:hidden; height:218px">
        <div *ngFor="let el of lista">
            <p *ngIf="((el.receiver == username && el.sender == receiver) || ( el.sender == username && el.receiver == receiver) && el.receiver != 'everyone') ">{{el.sender}}: {{el.body}}</p>
        </div> 
      </div>
    
      <div >
        <div class="form-group">
          <textarea placeholder="Enter a private message for {{receiver}}" [(ngModel)]="msgForPrivate" class="form-control" rows="5" (click)="resetUnread(receiver)" ></textarea>
        </div>  
        <button class="btn btn-outline-primary" type="button" (click)="send()">Send to {{receiver}}</button>
        <button class="btn btn-outline-danger" type="button" (click)=closePrivate()>Close</button>
      </div>
  
    </div>

  </div>


  

</div> -->


<body>
  <div class="container">
    <h3 class=" text-center" style="padding-top:5px;">University Chat Service</h3>
    <hr>
    <div class="messaging">
      <div class="inbox_msg">
        <div class="inbox_people">
          <div class="headind_srch">
            <div class="recent_heading">
              <h4>Online List</h4>
            </div>
            <div class="srch_bar">
              <div class="stylish-input-group">
                <input size="14" class="search-bar" type="text" [(ngModel)]="str" (ngModelChange)="pretraga(); provera();" placeholder="Search username">
                <span class="input-group-addon">
                  <button *ngIf="showButton" class="btn btn-outline-primary" (click)='setSearch()'><i class="fa fa-search"></i></button>
                </span> 
              </div>
              
            </div>
          </div>
          <div class="inbox_chat">
            <div class="chat_list active_chat">
              <div class="chat_people">
                <div class="chat_img">  </div>
                <div *ngFor="let user of sUserUnreads|orderBy:'unread'">
                  <button class="btn btn-outline-success" style="width: 80px;" (click)='setReciever(user.username);'>
                    {{user.username}} <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"><i *ngIf="user.unread>=0" class="fa fa-circle" aria-hidden="true" style="font-size: 5px; float: right; margin-top: 11px"></i><span style="color: blue;float: right" *ngIf="!user.unread==0">{{user.unread*-1}}</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="type_msg">
            <div class="input_msg_write">
              <input type="text" class="write_msg" [(ngModel)]="msg" placeholder=" Send to everyone..." />
              <button class="msg_send_btn" type="button" (click)="sendToEveryone()"><i class="fa fa-paper-plane-o"
                  aria-hidden="true"></i></button>
            </div>
          </div>
        </div>
        <div style="overflow-y:scroll; overflow-x:hidden; height:650px; text-align:center; width:30%">
            <h3>Global Chat</h3>
            <div *ngFor="let el of lista">
              
              <p *ngIf="el.receiver == 'everyone'">{{el.sender}}: {{el.body}}</p>
        </div>
 
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="openPrivate" style="width: 25%;" class="private_chat">
      <div style="overflow-y:scroll; overflow-x:hidden; height:550px; text-align: center;">
          <h3 style="text-align: center;">Private Chat</h3>
        <div *ngFor="let el of lista">
            <p *ngIf="((el.receiver == username && el.sender == receiver) || ( el.sender == username && el.receiver == receiver) && el.receiver != 'everyone') ">{{el.sender}}: {{el.body}}</p>
        </div> 
      </div>
    
      <div >
        <div style="position: relative; width:100%;">
          <textarea placeholder="Enter a private message for {{receiver}}" [(ngModel)]="msgForPrivate" class="form-control" rows="2" (click)="resetUnread(receiver)"></textarea>
          <button class="btn btn-outline-primary" type="button" (click)="send()">Send to {{receiver}}</button>
          <button class="btn btn-outline-danger" type="button" (click)=closePrivate()>Close</button>
        </div>  
      </div>
    </div> 
</body>